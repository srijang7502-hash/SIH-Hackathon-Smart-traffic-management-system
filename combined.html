<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Traffic Management System</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    body {
      background-color: #ffffff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }

    /* Navbar */
    .navbar {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      padding: 1rem 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    .navbar-brand {
      font-weight: bold;
      font-size: 1.5rem;
      color: white !important;
    }

    .btn-control {
      border-radius: 25px;
      padding: 10px 25px;
      font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    .btn-control:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    }

    /* Section Titles */
    .section-title {
      font-size: 2rem;
      font-weight: 700;
      color: #2a5298;
      margin-bottom: 1rem;
      text-align: center;
    }
    .section-description {
      font-size: 1.1rem;
      color: #666;
      text-align: center;
      margin-bottom: 3rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
    }

    /* Video Collage */
    .video-collage {
      display: grid;
      grid-template-columns: 2fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 15px;
      height: 500px;
      margin: 2rem 0;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    .video-item {
      position: relative;
      overflow: hidden;
      background: #f8f9fa;
      border-radius: 10px;
    }
    .video-main { grid-row: span 2; }
    .video-item video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }
    .video-label {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* Traffic Lights */
    .traffic-section {
      background: #f8f9fa;
      padding: 4rem 0;
      margin: 4rem 0;
      border-radius: 20px;
    }
    .traffic-lights {
      display: flex;
      justify-content: space-around;
      margin: 3rem 0;
      flex-wrap: wrap;
      gap: 2rem;
    }
    .light {
      width: 80px;
      height: 220px;
      background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
      border-radius: 25px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
    }
    .bulb {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #333;
      transition: all 0.5s ease;
    }
    .bulb.red.active { background: radial-gradient(circle, #ff4757, #cc0000); box-shadow: 0 0 20px rgba(255,71,87,0.6); }
    .bulb.yellow.active { background: radial-gradient(circle, #ffa502, #ff6348); box-shadow: 0 0 20px rgba(255,165,2,0.6); }
    .bulb.green.active { background: radial-gradient(circle, #2ed573, #00a80e); box-shadow: 0 0 20px rgba(46,213,115,0.6); }
    .light-label {
      position: absolute;
      bottom: -30px;
      color: #666;
      font-weight: 600;
      font-size: 0.9rem;
    }

    /* Dashboard Cards (Website) */
    .dashboard-card {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 1px solid #e9ecef;
    }
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
    }
    .metric-icon { font-size: 2.5rem; margin-bottom: 1rem; color: #2a5298; }
    .metric-value { font-size: 2rem; font-weight: bold; color: #333; margin-bottom: 0.5rem; }
    .metric-label { color: #666; font-size: 0.95rem; }

    /* Integrated Dashboard Section */
    .card-ghost {
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(22,28,36,0.06);
      border: 0;
    }
    .filter-pill {
      border-radius: 12px;
      background: white;
      box-shadow: 0 3px 8px rgba(22,28,36,0.04);
      padding: 12px 16px;
      min-width: 220px;
    }
    .charts-row { display:flex; flex-wrap:wrap; gap:1rem; }
    .metric-sub { font-size:14px; color:#5b6670; }
    .metric-value-lg { font-size:42px; font-weight:700; }

    /* Footer */
    footer {
      background: #2a5298;
      color: white;
      text-align: center;
      padding: 2rem 0;
      margin-top: 4rem;
    }

    @media(max-width:768px) {
      .video-collage { grid-template-columns:1fr; height:auto; }
      .video-main { grid-row: span 1; height:300px; }
      .video-item { height:200px; }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img src="logo.png" alt="logo" style="height:60px; width:80px;">
        Smart Traffic Management System
      </a>
      <div class="d-flex">
        <button class="btn btn-success btn-control me-3" onclick="startSimulation()">
          <i class="fas fa-play me-2"></i>Start System
        </button>
        <button class="btn btn-danger btn-control" onclick="endSimulation()">
          <i class="fas fa-stop me-2"></i>Stop System
        </button>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <div class="container mt-5">
    <h1 class="section-title">AI-Powered Traffic Management</h1>
    <p class="section-description">
      Our intelligent system processes live CCTV feeds using advanced YOLO object detection 
      to monitor vehicle density and automatically optimize traffic signal timing.
    </p>
  </div>

  <!-- Videos -->
  <div class="container">
    <div class="video-collage">
      <div class="video-item video-main">
        <video controls autoplay muted loop>
          <source src="http://172.20.214.243:8000/video-feed" type="video/mp4">
        </video>
        <div class="video-label"><i class="fas fa-video me-2"></i>Main Intersection</div>
      </div>
      <div class="video-item">
        <video controls autoplay muted loop><source src="sample1.mp4" type="video/mp4"></video>
        <div class="video-label"><i class="fas fa-camera me-1"></i>North Approach</div>
      </div>
      <div class="video-item">
        <video controls autoplay muted loop><source src="sample2.mp4" type="video/mp4"></video>
        <div class="video-label"><i class="fas fa-camera me-1"></i>South Approach</div>
      </div>
    </div>
  </div>

  <!-- Process Flow -->
  <div class="container">
    <div class="process-flow">
      <h2 class="section-title text-white mb-4">How Our System Works</h2>
      <div class="row text-center">
        <div class="col-md-3"><i class="fas fa-video fa-2x"></i><p>Live CCTV Feed</p></div>
        <div class="col-md-3"><i class="fas fa-brain fa-2x"></i><p>YOLO Detection</p></div>
        <div class="col-md-3"><i class="fas fa-calculator fa-2x"></i><p>Dynamic Calculation</p></div>
        <div class="col-md-3"><i class="fas fa-traffic-light fa-2x"></i><p>Signal Control</p></div>
      </div>
    </div>
  </div>

  <!-- Traffic Lights -->
  <div class="container">
    <div class="traffic-section">
      <h2 class="section-title">Real-Time Traffic Signal Status</h2>
      <div class="traffic-lights">
        <div class="light"><div class="bulb red active"></div><div class="bulb yellow"></div><div class="bulb green"></div><div class="light-label">North</div></div>
        <div class="light"><div class="bulb red active"></div><div class="bulb yellow"></div><div class="bulb green"></div><div class="light-label">East</div></div>
        <div class="light"><div class="bulb red active"></div><div class="bulb yellow"></div><div class="bulb green"></div><div class="light-label">South</div></div>
        <div class="light"><div class="bulb red active"></div><div class="bulb yellow"></div><div class="bulb green"></div><div class="light-label">West</div></div>
      </div>
    </div>
  </div>

  <!-- Map -->
  <div class="container">
    <h2 class="section-title">Traffic Flow Overview</h2>
    <div class="map-container">
      <iframe src="https://www.google.com/maps/embed?pb=!1m18..." width="100%" height="400" style="border:0;"></iframe>
    </div>
  </div>

  <!-- Performance Metrics -->
  <div class="container">
    <h2 class="section-title">System Performance Metrics</h2>
    <div class="row">
      <div class="col-lg-3 col-md-6 mb-4"><div class="dashboard-card"><i class="fas fa-car metric-icon"></i><div id="vehicleCount">284</div><div class="metric-label">Vehicles</div></div></div>
      <div class="col-lg-3 col-md-6 mb-4"><div class="dashboard-card"><i class="fas fa-clock metric-icon"></i><div id="avgWaitTime">1.8m</div><div class="metric-label">Avg Wait</div></div></div>
      <div class="col-lg-3 col-md-6 mb-4"><div class="dashboard-card"><i class="fas fa-tachometer-alt metric-icon"></i><div id="efficiency">96%</div><div class="metric-label">Efficiency</div></div></div>
      <div class="col-lg-3 col-md-6 mb-4"><div class="dashboard-card"><i class="fas fa-save metric-icon"></i><div id="timeSaved">12.4m</div><div class="metric-label">Time Saved</div></div></div>
    </div>
  </div>

  <!-- Integrated Data Dashboard -->
  <div class="container my-5">
    <h2 class="section-title">Traffic Data Dashboard</h2>
    <div class="card card-ghost p-3 mb-4">
      <div class="row charts-row">
        <div class="col-lg-6"><h5>Extra Delay Time</h5><canvas id="delayChart"></canvas></div>
        <div class="col-lg-6"><h5>Average Speed</h5><canvas id="speedChart"></canvas></div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-md-3"><div class="card card-ghost p-4"><div class="metric-sub">Productivity Loss</div><div class="metric-value-lg mt-3">65%</div></div></div>
      <div class="col-md-3"><div class="card card-ghost p-4"><div class="metric-sub">Fuel Wastage</div><div class="metric-value-lg mt-3">25%</div></div></div>
      <div class="col-md-3"><div class="card card-ghost p-4"><div class="metric-sub">Environmental Cost</div><div class="metric-value-lg mt-3">7%</div></div></div>
      <div class="col-md-3 d-flex align-items-center justify-content-center"><div style="width:120px;height:120px;"><canvas id="donutChart"></canvas></div></div>
    </div>
  </div>

  <!-- Footer -->
  <footer><p class="mb-0">&copy; 2025 Smart Traffic Management Headquarters</p></footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Chart.js setup
    const cities=['Bengaluru','Kolkata','Pune','Hyderabad','Chennai'];
    const delays=[22,20,19,18,18];
    new Chart(document.getElementById('delayChart'),{
      type:'bar',
      data:{labels:cities.reverse(),datasets:[{data:delays.reverse(),backgroundColor:'rgba(235,87,87,0.95)'}]},
      options:{indexAxis:'y',plugins:{legend:{display:false}}}
    });

    const speedCities=['Chennai','Hyderabad','Pune','Bengaluru','Kolkata'];
    const speeds=[20,19.35,18.75,17.65,17.65];
    new Chart(document.getElementById('speedChart'),{
      type:'bar',
      data:{labels:speedCities,datasets:[{data:speeds,backgroundColor:'rgba(33,121,255,0.95)'}]},
      options:{indexAxis:'y',plugins:{legend:{display:false}}}
    });

    new Chart(document.getElementById('donutChart'),{
      type:'doughnut',
      data:{labels:['Productivity Loss','Fuel Wastage','Environmental Cost','Accident Cost'],datasets:[{data:[65,25,7,3],backgroundColor:['#eb5757','#2179ff','#84c764','#ffc107']}]},
      options:{plugins:{legend:{display:false}}}
    });
  </script>
</body>
</html>
